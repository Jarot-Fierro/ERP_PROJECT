{% extends "base.html" %}
{% load static %}
{% block content %}

    <!--begin::Container-->
    <div class="container-fluid">
        <!--begin::Row-->
        <div class="row">
            <!-- Loop through permissions to create small boxes -->
            {% for module, level in permissions.items %}
                {% if level > 0 %}
                    <!--begin::Col-->
                    <div class="col-lg-3 col-6">
                        <!--begin::Small Box Widget-->
                        <div class="small-box
                {% if level == 1 %} text-bg-primary
                {% elif level == 2 %} text-bg-success
                {% elif level == 3 %} text-bg-warning
                {% else %} text-bg-info
                {% endif %}">
                            <div class="inner">
                                <h3>
                                    {% if module == "customers" %}
                                        {{ customer_count|default:"0" }}
                                    {% elif module == "suppliers" %}
                                        {{ supplier_count|default:"0" }}
                                    {% elif module == "materials" %}
                                        {{ material_count|default:"0" }}
                                    {% elif module == "purchases" %}
                                        {{ purchase_count|default:"0" }}
                                    {% elif module == "sales" %}
                                        {{ sales_count|default:"0" }}
                                    {% elif module == "inventory" %}
                                        {{ inventory_count|default:"0" }}
                                    {% elif module == "accounting" %}
                                        {{ transaction_count|default:"0" }}
                                    {% elif module == "reporting" %}
                                        {{ report_count|default:"0" }}
                                    {% else %}
                                        {{ level }}
                                    {% endif %}
                                </h3>

                                <p>{{ module|capfirst }}</p>
                            </div>

                            <!-- Iconos SVG -->
                            <svg class="small-box-icon" fill="currentColor" viewBox="0 0 24 24"
                                 xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                {% if module == "customers" %}
                                    <!-- People Icon -->
                                    <path d="M4.5 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM14.25 8.625a3.375 3.375 0 116.75 0 3.375 3.375 0 01-6.75 0zM1.5 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM17.25 19.128l-.001.144a2.25 2.25 0 01-.233.96 10.088 10.088 0 005.06-1.01.75.75 0 00.42-.643 4.875 4.875 0 00-6.957-4.611 8.586 8.586 0 011.71 5.157v.003z"></path>
                                {% elif module == "suppliers" %}
                                    <!-- Truck Icon -->
                                    <path d="M3.375 4.5C2.339 4.5 1.5 5.34 1.5 6.375V13.5h12V6.375c0-1.036-.84-1.875-1.875-1.875h-8.25zM13.5 15h-12v2.625c0 1.035.84 1.875 1.875 1.875h.375a3 3 0 116 0h3a.75.75 0 00.75-.75V15z"></path>
                                    <path d="M8.25 19.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0zM15.75 6.75a.75.75 0 00-.75.75v11.25c0 .414.336.75.75.75h.75a.75.75 0 00.75-.75V7.5a.75.75 0 00-.75-.75h-.75z"></path>
                                    <path d="M19.5 19.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0z"></path>
                                {% elif module == "materials" %}
                                    <!-- Box Icon -->
                                    <path d="M12.378 1.602a.75.75 0 00-.756 0L3 6.632l9 5.25 9-5.25-8.622-5.03zM21.75 7.93l-9 5.25v9l8.628-5.032a.75.75 0 00.372-.648V7.93zM11.25 22.18v-9l-9-5.25v8.57a.75.75 0 00.372.648l8.628 5.033z"></path>
                                {% elif module == "purchases" %}
                                    <!-- Cart Check Icon -->
                                    <path d="M2.25 2.25a.75.75 0 000 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 00-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 000-1.5H5.378A2.25 2.25 0 017.5 15h11.218a.75.75 0 00.674-.421 60.358 60.358 0 002.96-7.228.75.75 0 00-.525-.965A60.864 60.864 0 005.68 4.509l-.232-.867A1.875 1.875 0 003.636 2.25H2.25zM3.75 20.25a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM16.5 20.25a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z"></path>
                                {% elif module == "sales" %}
                                    <!-- Cash Stack Icon -->
                                    <path d="M12 7.5a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5z"></path>
                                    <path fill-rule="evenodd"
                                          d="M1.5 4.875C1.5 3.839 2.34 3 3.375 3h17.25c1.035 0 1.875.84 1.875 1.875v9.75c0 1.036-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 011.5 14.625v-9.75zM8.25 9.75a3.75 3.75 0 117.5 0 3.75 3.75 0 01-7.5 0zM18.75 9a.75.75 0 00-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 00.75-.75V9.75a.75.75 0 00-.75-.75h-.008zM4.5 9.75A.75.75 0 015.25 9h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H5.25a.75.75 0 01-.75-.75V9.75z"
                                          clip-rule="evenodd"></path>
                                    <path d="M2.25 18a.75.75 0 000 1.5c5.4 0 10.63.722 15.6 2.075 1.19.324 2.4-.558 2.4-1.82V18.75a.75.75 0 00-.75-.75H2.25z"></path>
                                {% elif module == "inventory" %}
                                    <!-- Clipboard Data Icon -->
                                    <path fill-rule="evenodd"
                                          d="M7.502 6h7.128A3.375 3.375 0 0118 9.375v9.375a3 3 0 003-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 00-.673-.05A3 3 0 0015 1.5h-1.5a3 3 0 00-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6zM13.5 3A1.5 1.5 0 0012 4.5h4.5A1.5 1.5 0 0015 3h-1.5z"
                                          clip-rule="evenodd"></path>
                                    <path fill-rule="evenodd"
                                          d="M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 013 20.625V9.375zM6 12a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H6.75a.75.75 0 01-.75-.75V12zm2.25 0a.75.75 0 01.75-.75h3.75a.75.75 0 010 1.5H9a.75.75 0 01-.75-.75zM6 15a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H6.75a.75.75 0 01-.75-.75V15zm2.25 0a.75.75 0 01.75-.75h3.75a.75.75 0 010 1.5H9a.75.75 0 01-.75-.75zM6 18a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H6.75a.75.75 0 01-.75-.75V18zm2.25 0a.75.75 0 01.75-.75h3.75a.75.75 0 010 1.5H9a.75.75 0 01-.75-.75z"
                                          clip-rule="evenodd"></path>
                                {% elif module == "accounting" %}
                                    <!-- Calculator Icon -->
                                    <path fill-rule="evenodd"
                                          d="M6 2a.75.75 0 01.75.75V4h10.5V2.75a.75.75 0 011.5 0V4h.75A2.25 2.25 0 0122 6.25v14.5A2.25 2.25 0 0119.75 23H4.25A2.25 2.25 0 012 20.75V6.25A2.25 2.25 0 014.25 4H5V2.75A.75.75 0 016 2zm-1.5 4.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h15c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25h-15zm10.62 2.969a.75.75 0 011.058-.081l.011.01c.033.03.074.086.082.15.007.063-.004.121-.038.165l-.001.001-3.495 4.575 3.495 4.575a.75.75 0 01-.976 1.138l-.012-.01a.384.384 0 01-.082-.15.75.75 0 01.038-.165l.001-.001-3.075-4.031-3.075 4.031a.75.75 0 01-1.058.081l-.011-.01a.384.384 0 01-.082-.15.75.75 0 01.038-.165l.001-.001 3.495-4.575-3.495-4.575a.75.75 0 01.976-1.138l.012.01c.033.03.074.086.082.15a.75.75 0 01-.038.165l-.001.001 3.075 4.031 3.075-4.031a.75.75 0 01.081-.058z"
                                          clip-rule="evenodd"></path>
                                {% elif module == "reporting" %}
                                    <!-- Bar Chart Line Icon -->
                                    <path fill-rule="evenodd"
                                          d="M2.25 13.5a8.25 8.25 0 018.25-8.25.75.75 0 01.75.75v6.75H18a.75.75 0 01.75.75 8.25 8.25 0 01-16.5 0z"
                                          clip-rule="evenodd"></path>
                                    <path fill-rule="evenodd"
                                          d="M12.75 3a.75.75 0 01.75-.75 8.25 8.25 0 018.25 8.25.75.75 0 01-.75.75h-7.5a.75.75 0 01-.75-.75V3z"
                                          clip-rule="evenodd"></path>
                                {% else %}
                                    <!-- Default Shield Lock Icon -->
                                    <path fill-rule="evenodd"
                                          d="M12.516 2.17a.75.75 0 00-1.032 0 11.209 11.209 0 01-7.877 3.08.75.75 0 00-.722.515A12.74 12.74 0 002.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 00.374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 00-.722-.516l-.143.001c-2.996 0-5.717-1.17-7.734-3.08zm3.094 8.016a4.5 4.5 0 10-6.218 6.218.75.75 0 01.814 1.22 6 6 0 118.304-8.304.75.75 0 01-1.218.814 4.5 4.5 0 00-1.682-1.848z"
                                          clip-rule="evenodd"></path>
                                {% endif %}
                            </svg>

                            <a href="#" class="small-box-footer
                    {% if level == 3 %}link-dark{% else %}link-light{% endif %}
                    link-underline-opacity-0 link-underline-opacity-50-hover">
                                Acceder <i class="bi bi-link-45deg"></i>
                            </a>
                        </div>
                        <!--end::Small Box Widget-->
                    </div>
                    <!--end::Col-->
                {% endif %}
            {% endfor %}
        </div>
        <!--end::Row-->

        <!--begin::Row-->
        <div class="row">
            <!-- Start col -->
            <div class="col-lg-7 connectedSortable">
                <div class="card mb-4">
                    <div class="card-header">
                        <h3 class="card-title">Sales Value</h3>
                    </div>

                    <div class="card-body">
                        <div id="revenue-chart"></div>
                    </div>
                </div>
                <!-- /.card -->
            </div>
            <!-- /.Start col -->

            <!-- Start col -->
            <div class="col-lg-5 connectedSortable">
                <div class="card text-white bg-primary bg-gradient border-primary mb-4">
                    <div class="card-header border-0">
                        <h3 class="card-title">World Map</h3>
                        <div class="card-tools">
                            <button
                                    type="button"
                                    class="btn btn-primary btn-sm"
                                    data-lte-toggle="card-collapse"
                            >
                                <i data-lte-icon="expand" class="bi bi-plus-lg"></i>
                                <i data-lte-icon="collapse" class="bi bi-dash-lg"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="world-map" style="height: 220px"></div>
                    </div>
                    <div class="card-footer border-0">
                        <!--begin::Row-->
                        <div class="row">
                            <div class="col-4 text-center">
                                <div id="sparkline-1" class="text-dark"></div>
                                <div class="text-white">Visitors</div>
                            </div>
                            <div class="col-4 text-center">
                                <div id="sparkline-2" class="text-dark"></div>
                                <div class="text-white">Online</div>
                            </div>
                            <div class="col-4 text-center">
                                <div id="sparkline-3" class="text-dark"></div>
                                <div class="text-white">Sales</div>
                            </div>
                        </div>
                        <!--end::Row-->
                    </div>
                </div>
            </div>
            <!-- /.Start col -->
        </div>
        <!-- /.row (main row) -->
    </div>
    <!--end::Container-->

{% endblock %}