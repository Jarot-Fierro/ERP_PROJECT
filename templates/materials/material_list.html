{% extends "base.html" %}

{% block title %}Materiales{% endblock %}

{% block header %}
    <div class="row">
        <div class="col-sm-6">
            <h3 class="mb-0">Materiales</h3>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="card">
        <div class="card-body">
            <table id="datatable" class="table table-bordered table-hover align-middle w-100 my-2">
                <thead class="table-light">
                <tr>
                    <th>ID</th>
                    <th>Acciones</th>
                    <th>Nombre</th>
                    <th>Estado</th>
                    <th>Actualizado</th>
                </tr>
                </thead>
            </table>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
    <script>
        $(function () {
            $('#datatable').DataTable({
                processing: true,
                serverSide: true,
                responsive: true,
                autoWidth: false,

                ajax: {
                    url: "{% url 'materials_datatable' %}",
                    type: "GET"
                },


                order: [[0, "desc"]],

                columnDefs: [
                    {targets: 1, orderable: false, searchable: false}
                ],

                pageLength: 10,
                lengthMenu: [[10, 25, 50, 100], [10, 25, 50, 100]],

                buttons: {
                    dom: {
                        button: {
                            className: 'btn btn-sm'
                        }
                    },
                    buttons: [
                        {
                            extend: 'excel',
                            className: 'btn-success',
                            text: '<i class="bi bi-file-earmark-excel"></i> Excel'
                        },
                        {
                            extend: 'pdf',
                            className: 'btn-danger',
                            text: '<i class="bi bi-file-earmark-pdf"></i> PDF'
                        },
                        {
                            extend: 'print',
                            className: 'btn-secondary',
                            text: '<i class="bi bi-printer"></i> Imprimir'
                        },
                        {
                            extend: 'colvis',
                            className: 'btn-info',
                            text: '<i class="bi bi-eye"></i> Columnas'
                        }
                    ]
                },

                dom: '<"row"<"col-md-6"B><"col-md-6"f>>' +
                    '<"row"<"col-12"tr>>' +
                    '<"row"<"col-md-5"i><"col-md-7"p>>',

                language: {
                    "search": "Buscar:",
                    "lengthMenu": "Mostrar _MENU_ registros",
                    "info": "Mostrando _START_ a _END_ de _TOTAL_ registros",
                    "infoEmpty": "Mostrando 0 a 0 de 0 registros",
                    "infoFiltered": "(filtrado de _MAX_ registros totales)",
                    "zeroRecords": "No se encontraron resultados",
                    "processing": "Procesando...",
                    "paginate": {
                        // Usamos solo iconos en lugar de texto
                        "first": '<i class="bi bi-chevron-double-left"></i>',
                        "last": '<i class="bi bi-chevron-double-right"></i>',
                        "next": '<i class="bi bi-chevron-right"></i>',
                        "previous": '<i class="bi bi-chevron-left"></i>'
                    }
                }

            });
        });
    </script>
{% endblock %}